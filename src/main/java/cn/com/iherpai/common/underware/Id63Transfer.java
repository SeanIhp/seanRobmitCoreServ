package cn.com.iherpai.common.underware;

import java.util.HashMap;
import java.util.Map;

public class Id63Transfer {
	private static Map<Long, String> _63EncodeMap = new HashMap<Long, String>();
	private static Map<String, Long> _63DecodeMap = new HashMap<String, Long>();
	
	static{
		_63EncodeMap.put(0L, "_");
		_63EncodeMap.put(1L, "0");
		_63EncodeMap.put(2L, "1");
		_63EncodeMap.put(3L, "2");
		_63EncodeMap.put(4L, "3");
		_63EncodeMap.put(5L, "4");
		_63EncodeMap.put(6L, "5");
		_63EncodeMap.put(7L, "6");
		_63EncodeMap.put(8L, "7");
		_63EncodeMap.put(9L, "8");
		_63EncodeMap.put(10L, "9");
		_63EncodeMap.put(11L, "A");
		_63EncodeMap.put(12L, "B");
		_63EncodeMap.put(13L, "C");
		_63EncodeMap.put(14L, "D");
		_63EncodeMap.put(15L, "E");
		_63EncodeMap.put(16L, "F");
		_63EncodeMap.put(17L, "G");
		_63EncodeMap.put(18L, "H");
		_63EncodeMap.put(19L, "I");
		_63EncodeMap.put(20L, "J");
		_63EncodeMap.put(21L, "K");
		_63EncodeMap.put(22L, "L");
		_63EncodeMap.put(23L, "M");
		_63EncodeMap.put(24L, "N");
		_63EncodeMap.put(25L, "O");
		_63EncodeMap.put(26L, "P");
		_63EncodeMap.put(27L, "Q");
		_63EncodeMap.put(28L, "R");
		_63EncodeMap.put(29L, "S");
		_63EncodeMap.put(30L, "T");
		_63EncodeMap.put(31L, "U");
		_63EncodeMap.put(32L, "V");
		_63EncodeMap.put(33L, "W");
		_63EncodeMap.put(34L, "X");
		_63EncodeMap.put(35L, "Y");
		_63EncodeMap.put(36L, "Z");
		_63EncodeMap.put(37L, "a");
		_63EncodeMap.put(38L, "b");
		_63EncodeMap.put(39L, "c");
		_63EncodeMap.put(40L, "d");
		_63EncodeMap.put(41L, "e");
		_63EncodeMap.put(42L, "f");
		_63EncodeMap.put(43L, "g");
		_63EncodeMap.put(44L, "h");
		_63EncodeMap.put(45L, "i");
		_63EncodeMap.put(46L, "j");
		_63EncodeMap.put(47L, "k");
		_63EncodeMap.put(48L, "l");
		_63EncodeMap.put(49L, "m");
		_63EncodeMap.put(50L, "n");
		_63EncodeMap.put(51L, "o");
		_63EncodeMap.put(52L, "p");
		_63EncodeMap.put(53L, "q");
		_63EncodeMap.put(54L, "r");
		_63EncodeMap.put(55L, "s");
		_63EncodeMap.put(56L, "t");
		_63EncodeMap.put(57L, "u");
		_63EncodeMap.put(58L, "v");
		_63EncodeMap.put(59L, "w");
		_63EncodeMap.put(60L, "x");
		_63EncodeMap.put(61L, "y");
		_63EncodeMap.put(62L, "z");

		_63DecodeMap.put("_", 0L);
		_63DecodeMap.put("0", 1L);
		_63DecodeMap.put("1", 2L);
		_63DecodeMap.put("2", 3L);
		_63DecodeMap.put("3", 4L);
		_63DecodeMap.put("4", 5L);
		_63DecodeMap.put("5", 6L);
		_63DecodeMap.put("6", 7L);
		_63DecodeMap.put("7", 8L);
		_63DecodeMap.put("8", 9L);
		_63DecodeMap.put("9", 10L);
		_63DecodeMap.put("A", 11L);
		_63DecodeMap.put("B", 12L);
		_63DecodeMap.put("C", 13L);
		_63DecodeMap.put("D", 14L);
		_63DecodeMap.put("E", 15L);
		_63DecodeMap.put("F", 16L);
		_63DecodeMap.put("G", 17L);
		_63DecodeMap.put("H", 18L);
		_63DecodeMap.put("I", 19L);
		_63DecodeMap.put("J", 20L);
		_63DecodeMap.put("K", 21L);
		_63DecodeMap.put("L", 22L);
		_63DecodeMap.put("M", 23L);
		_63DecodeMap.put("N", 24L);
		_63DecodeMap.put("O", 25L);
		_63DecodeMap.put("P", 26L);
		_63DecodeMap.put("Q", 27L);
		_63DecodeMap.put("R", 28L);
		_63DecodeMap.put("S", 29L);
		_63DecodeMap.put("T", 30L);
		_63DecodeMap.put("U", 31L);
		_63DecodeMap.put("V", 32L);
		_63DecodeMap.put("W", 33L);
		_63DecodeMap.put("X", 34L);
		_63DecodeMap.put("Y", 35L);
		_63DecodeMap.put("Z", 36L);
		_63DecodeMap.put("a", 37L);
		_63DecodeMap.put("b", 38L);
		_63DecodeMap.put("c", 39L);
		_63DecodeMap.put("d", 40L);
		_63DecodeMap.put("e", 41L);
		_63DecodeMap.put("f", 42L);
		_63DecodeMap.put("g", 43L);
		_63DecodeMap.put("h", 44L);
		_63DecodeMap.put("i", 45L);
		_63DecodeMap.put("j", 46L);
		_63DecodeMap.put("k", 47L);
		_63DecodeMap.put("l", 48L);
		_63DecodeMap.put("m", 49L);
		_63DecodeMap.put("n", 50L);
		_63DecodeMap.put("o", 51L);
		_63DecodeMap.put("p", 52L);
		_63DecodeMap.put("q", 53L);
		_63DecodeMap.put("r", 54L);
		_63DecodeMap.put("s", 55L);
		_63DecodeMap.put("t", 56L);
		_63DecodeMap.put("u", 57L);
		_63DecodeMap.put("v", 58L);
		_63DecodeMap.put("w", 59L);
		_63DecodeMap.put("x", 60L);
		_63DecodeMap.put("y", 61L);
		_63DecodeMap.put("z", 62L);
	}
	
	
	
	public static String toEncode63(Long xCode){
		StringBuffer res = null;
		if(xCode!=null && xCode>=0L){
			res = new StringBuffer("");
			long _tempNum = xCode;
			long _tempRst = 0L;
			while(true){
				_tempRst = _tempNum / 63L;
				long _tempMod = _tempNum % 63L;
				res.append( _63EncodeMap.get(_tempMod) );
				if(_tempRst>=36L){
					_tempNum = _tempRst;
				}else{
					res.append( _63EncodeMap.get(_tempRst) );
					break;
				}
			}
		}else{
			throw new NumberFormatException();
		}
		return res.reverse().toString();
	}
	
	
	
	public static Long toDecode63(String xCode){
		Long res = null;
		if(xCode!=null && !xCode.trim().equals("")){
			res = 0L;
			for(int idx=0; idx<xCode.length(); idx++){
				res = res + ( _63DecodeMap.get(xCode.substring(idx, idx+1)) * getPow(63L, (xCode.length()-1-idx)) );
			}
		}else{
			throw new NumberFormatException();
		}
		return res;
	}
	
	
	
	private static long getPow(long x, long y){
        if(y == 0) return 1;
        if(y == 1) return x;
        return x*getPow(x, y-1);
    }
	
	
	
	public static void main(String[] args){
		Id63Transfer iferx = new Id63Transfer();
		long xx = 2099123123595999L;		
//		long xx = 1000123123595999L;		201212161519121912
//		long xx =99999L;
//		long xx =9999999L;
//		long xx =9999999L;
		System.out.println("to 63Encode: "+ iferx.toEncode63(xx));
		String yy = iferx.toEncode63(xx);
		System.out.println("to 63Decode: "+ iferx.toDecode63(yy));
		/*
		int i=0;
		while(i<1000){
			try {
				Thread.sleep(1);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
			long beginMs = DateTime.getCurrentTimestampMs();
//			String xid = IdGenerator.generate63("AABBCCDDEEFFGGCOMPUTER");
//			System.out.println("xid length: "+xid.length()+"\tId Generate: "+ xid);
			i++;
			long endMs = DateTime.getCurrentTimestampMs();
			System.out.println("TOTAL MS: "+(endMs-beginMs));
		}
		*/
		
		Thread th = Thread.currentThread();
		System.out.println(th.getId());
		System.out.println(iferx.toDecode63("ZZZZZZ"));
		
		System.out.println("___________________________________________________________________________");
		
		

		Id63Transfer ifer = new Id63Transfer();
		long xx0 = 2013010123595999L;
		System.out.println(xx0+" to 63Encode: "+ ifer.toEncode63(xx0));
		long xx1 = 2014010123595999L;
		System.out.println(xx1+" to 63Encode: "+ ifer.toEncode63(xx1));
		long xx2 = 2014070123595999L;
		System.out.println(xx2+" to 63Encode: "+ ifer.toEncode63(xx2));
		long xx3 = 2015010123595999L;
		System.out.println(xx3+" to 63Encode: "+ ifer.toEncode63(xx3));
		long xx4 = 2015040123595999L;
		System.out.println(xx4+" to 63Encode: "+ ifer.toEncode63(xx4));
		long xx5 = 2015040123595999L;
		System.out.println(xx5+" to 63Encode: "+ ifer.toEncode63(xx5));
		long xx6 = 2015080123595999L;
		System.out.println(xx6+" to 63Encode: "+ ifer.toEncode63(xx6));
		long xx7 = 2016010123595999L;
		System.out.println(xx7+" to 63Encode: "+ ifer.toEncode63(xx7));
		long xx8 = 2016020123595999L;
		System.out.println(xx8+" to 63Encode: "+ ifer.toEncode63(xx8));
		long xx9 = 2016020123595999L;
		System.out.println(xx9+" to 63Encode: "+ ifer.toEncode63(xx9));
		long xx10 = 2016030123595999L;
		System.out.println(xx10+" to 63Encode: "+ ifer.toEncode63(xx10));
		long xx11 = 2016040123595999L;
		System.out.println(xx11+" to 63Encode: "+ ifer.toEncode63(xx11));
		long xx12 = 2016050123595999L;
		System.out.println(xx12+" to 63Encode: "+ ifer.toEncode63(xx12));
		long xx13 = 2016060123595999L;
		System.out.println(xx13+" to 63Encode: "+ ifer.toEncode63(xx13));
		long xx14 = 2016070123595999L;
		System.out.println(xx14+" to 63Encode: "+ ifer.toEncode63(xx14));
		long xx15 = 2016080123595999L;
		System.out.println(xx15+" to 63Encode: "+ ifer.toEncode63(xx15));
		long xx16 = 2016090123595999L;
		System.out.println(xx16+" to 63Encode: "+ ifer.toEncode63(xx16));
		long xx17 = 2016100123595999L;
		System.out.println(xx17+" to 63Encode: "+ ifer.toEncode63(xx17));
		long xx18 = 2016110123595999L;
		System.out.println(xx18+" to 63Encode: "+ ifer.toEncode63(xx18));
		long xx19 = 2016120123595999L;
		System.out.println(xx19+" to 63Encode: "+ ifer.toEncode63(xx19));
		long xx20 = 20991231L;
		System.out.println(xx20+" to 63Encode: "+ ifer.toEncode63(xx20));
		long xx21 = 2099123L;
		System.out.println(xx21+" to 63Encode: "+ ifer.toEncode63(xx21));
		long xx22 = 209912L;
		System.out.println(xx22+" to 63Encode: "+ ifer.toEncode63(xx22));
		System.out.println(Thread.currentThread().getId());
		long xx23 = 8999999;
		System.out.println(xx23+" to 63Encode: "+ ifer.toEncode63(xx23));
	}

}
